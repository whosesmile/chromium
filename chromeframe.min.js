/*! server - v0.1.0 - 2014-07-22
* Copyright (c) 2014 lovemoon@yeah.net; Licensed GPLv2 */
!function(){try{document.execCommand("BackgroundImageCache",!0,!0)}catch(a){}!function(a){function b(b){var c=a("<div/>").attr("id","activebar-container");c.css({display:"none",position:"fixed",zIndex:"9999",top:"0px",left:"0px",cursor:"default",padding:"4px","font-size":"9px",background:b.background,borderBottom:"1px solid "+b.border,color:b.fontColor});var d=a(window);return d.bind("resize",function(){c.width(a(this).width())}),d.triggerHandler("resize"),window.XMLHttpRequest||(c.css("position","absolute"),d.bind("scroll",a.fn.activebar.scroll_func).bind("resize",a.fn.activebar.resize_func)),c.append(a("<div></div>").attr("class","icon").css({"float":"left",width:"16px",height:"16px",margin:"0 4px 0 0",padding:"0"}).append('<img src="'+b.icons_path+'icon.png" class="chromeframenormal">').append('<img src="'+b.icons_path+'icon-over.png" class="chromeframehover">')),c.append(a("<div></div>").attr("class","close").css({"float":"right",margin:"0 5px 0 0 ",width:"16px",height:"16px"}).click(function(b){a.fn.activebar.hide(),b.stopPropagation()}).append('<img src="'+b.icons_path+'close.png" class="chromeframenormal">').append('<img src="'+b.icons_path+'close-over.png" class="chromeframehover">')),c.append(a("<div></div>").attr("class","chromeframecontent").css({margin:"0px 8px",paddingTop:"1px"})),a(".chromeframehover",c).hide(),a("body").prepend(c),c}function c(b,c){b.unbind("mouseenter mouseleave"),b.hover(function(){a(this).css({backgroundColor:c.highlight,color:"#FFFFFF"}).addClass("chromeframehover"),a(".chromeframehover",b).show(),a(".chromeframenormal",b).hide()},function(){a(this).css({backgroundColor:c.background,color:"#000000"}).removeClass("chromeframehover"),a(".chromeframehover",b).hide(),a(".chromeframenormal",b).show()}),a(".chromeframecontent",b).css({fontFamily:c.font,fontSize:c.fontSize})}a.iso_language=function(){var a=window.navigator.language||navigator.userLanguage;return(matches=a.match(/(\w{2})\-(\w{2})/))?(matches.shift(),matches[0]=matches[0].toLowerCase(),matches[1]=matches[1].toUpperCase()):(matches=a.match(/^(\w{2})$/))?matches.shift():matches=["en","US"],matches.join("-")},a.fn.activebar=function(d){function e(){g.a&&g.b&&g.c&&g.d&&a.fn.activebar.show()}d=a.extend({},a.fn.activebar.defaults,d);var f=a.iso_language();if(d.language=d.language===!0?f:d.language,msi=d.use_msi?"&msi=true":"",console.log(d.url),a.fn.activebar.iframe=a('<iframe src="'+d.url+'" frameborder="0" border="0" style="border:none"></iframe>'),a.fn.activebar.old_overflow=a("body").css("overflow"),null===a.fn.activebar.container&&(a.fn.activebar.container=b(d)),c(a.fn.activebar.container,d),a.fn.activebar.hide(),a.fn.activebar.container.find(".chromeframecontent").empty(),a(this).each(function(){a(".chromeframecontent",a.fn.activebar.container).append(this)}),a.fn.activebar.container.unbind("click"),null!==d.url&&a.fn.activebar.container.click(function(){a.fn.activebar.showiframe(d)}),a.fn.activebar.container_height=a.fn.activebar.container.height()+(parseInt(a.fn.activebar.container.css("paddingBottom"))+parseInt(a.fn.activebar.container.css("paddingTop"))+parseInt(a.fn.activebar.container.css("borderBottomWidth"))),a.fn.activebar.container.css("top","-"+a.fn.activebar.container_height+"px"),d.preload){var g={a:0,b:0,c:0,d:0};a('<img src="'+d.icons_path+'icon.png" class="chromeframenormal">').load(function(){g.a=1,e()}),a('<img src="'+d.icons_path+'icon-over.png" class="chromeframenormal">').load(function(){g.b=1,e()}),a('<img src="'+d.icons_path+'close.png" class="chromeframenormal">').load(function(){g.c=1,e()}),a('<img src="'+d.icons_path+'close-over.png" class="chromeframenormal">').load(function(){g.d=1,e()})}else a.fn.activebar.show()},a.fn.activebar.iframe=null,a.fn.activebar.showiframe=function(){a.fn.activebar.iframestate!==!0&&(a("body").append(a.fn.activebar.iframe).css({overflow:"hidden"}),a.fn.activebar.iframe.css({top:a.fn.activebar.container_height+"px",left:"0px",height:"100%",width:"100%",display:"block",position:"fixed",zIndex:"9998",overflow:"visible"}),a(window).triggerHandler("resize"),a.fn.activebar.iframestate=!0)},a.fn.activebar.defaults={background:"#ffffe1",border:"#666",language:!0,highlight:"#3399ff",font:"Bitstream Vera Sans,verdana,sans-serif",fontColor:"InfoText",fontSize:"11px",icons_path:"",use_msi:!0,url:"http://www.google.com/chromeframe/eula.html?hl=",preload:!0},a("head script").each(function(){var b=a(this).attr("src");-1!==b.indexOf("chromeframe.js")&&(a.fn.activebar.defaults.url=b.substring(0,b.lastIndexOf("/"))+"/chromium.msi",a.fn.activebar.defaults.icons_path=b.substring(0,b.lastIndexOf("/"))+"/")}),a.fn.activebar.scroll_func=function(){var b=a(window);a.fn.activebar.container.stop(!0,!0),3==a.fn.activebar.state?(a.fn.activebar.container.css("top",b.scrollTop()+"px"),a.fn.activebar.iframe.css({top:b.scrollTop()+a.fn.activebar.container_height+"px",position:"absolute",height:b.height()-a.fn.activebar.container_height+"px",width:b.width()+"px"})):(a.fn.activebar.container.css("top",b.scrollTop()-a.fn.activebar.container_height+"px"),a.fn.activebar.iframe.css("top","0px"))},a.fn.activebar.resize_func=function(){a(window).triggerHandler("scroll")},a.fn.activebar.state=0,a.fn.activebar.iframestate=!1,a.fn.activebar.container=null,a.fn.activebar.show=function(){if(!(a.fn.activebar.state>1)){a.fn.activebar.state=2,a.fn.activebar.container.css("display","block");var b=a.fn.activebar.container.height();a.fn.activebar.container.animate({top:"+="+a.fn.activebar.container_height+"px"},20*b,"linear",function(){a.fn.activebar.state=3})}},a.fn.activebar.hide=function(){if(!(a.fn.activebar.state<2)){a.fn.activebar.iframe.remove(),a.fn.activebar.iframestate=!1,a.cookie("refuseChromeInstall","1"),a.fn.activebar.state=1;var b=a.fn.activebar.container.height();a.fn.activebar.container.animate({top:"-="+a.fn.activebar.container_height+"px"},20*b,"linear",function(){a.fn.activebar.container.css("display","none"),a.fn.activebar.visible=!1,a("body").css("overflow",a.fn.activebar.old_overflow),a(window).triggerHandler("resize").unbind("scroll",a.fn.activebar.scroll_func).unbind("resize",a.fn.activebar.resize_func)})}}}(jQuery),function(a){a.chromeframebar=function(b){b=a.extend({},a.chromeframebar.defaults,b),a.chromeframebar.hInstallTimeout=null,a(window).bind("load",function(){(b.force||!a.cookie("refuseChromeInstall"))&&(b.timeout!==!1&&(a.chromeframebar.hInstallTimeout=window.setTimeout(function(){a.chromeframebar.fire(b)},b.timeout)),CFInstall.check({preventPrompt:!0,preventInstallDetection:!0,onmissing:function(){a.chromeframebar.hInstallTimeout&&window.clearTimeout(a.chromeframebar.hInstallTimeout),a.chromeframebar.fire(b)}}))})},a.chromeframebar.fire=function(b){lang=b.language===!0?a.iso_language():b.language,text="undefined"!=typeof b.text[lang]?b.text[lang]:b.text["en-US"],a("<div/>").html(text).activebar(b)},a.chromeframebar.defaults={language:!0,text:{"zh-CN":"为了更好的支持低版本浏览器，您需要安装插件： 点击下载","en-US":"Internet Explorer is missing updates required to view this site. Click here to update...","pt-BR":"Internet Explorer necessita instalar um plugin para visualizar esta página corretamente. Clique aqui para continuar..."},timeout:!1,force:!0}}(jQuery),function(a){a.cookie=function(b,c,d){if("undefined"==typeof c){var e=null;if(document.cookie&&""!=document.cookie)for(var f=document.cookie.split(";"),g=0;g<f.length;g++){var h=a.trim(f[g]);if(h.substring(0,b.length+1)==b+"="){e=decodeURIComponent(h.substring(b.length+1));break}}return e}d=d||{},null===c&&(c="",d.expires=-1);var i="";if(d.expires&&("number"==typeof d.expires||d.expires.toUTCString)){var j;"number"==typeof d.expires?(j=new Date,j.setTime(j.getTime()+24*d.expires*60*60*1e3)):j=d.expires,i="; expires="+j.toUTCString()}var k=d.path?"; path="+d.path:"",l=d.domain?"; domain="+d.domain:"",m=d.secure?"; secure":"";return document.cookie=[b,"=",encodeURIComponent(c),i,k,l,m].join(""),null}}(jQuery),$.chromeframebar()}();